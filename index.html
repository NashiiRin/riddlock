<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>指定のWebサイト</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: sans-serif;
            overflow: hidden; 
        }

        body {
            background-color: #1a1a1a; 
            color: #f0f0f0; 
            position: relative; 
        }

        .right-container {
            position: absolute;
            top: 0;
            right: 0;
            width: 50%; 
            height: 100vh; 
            padding: 20px;
            box-sizing: border-box; 
            display: flex;
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            gap: 20px;
            /* アニメーションコンテナの配置基準にする */
            position: relative;
        }

        .image-stack-container {
            position: relative; 
            display: flex; 
            justify-content: center;
            align-items: center;
            width: 100%; 
            height: auto; 
            /* アニメーションコンテナが重なった場合のため */
            z-index: 10; 
        }

        .background-image {
            max-width: 70%; 
            height: auto;
            display: block; 
        }

        .overlay-content {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%; 
            height: 100%; 
            gap: 10px; 
        }
        
        .overlay-button {
            max-width: 35%; 
            height: auto;
        }
        
        .overlay-button.button-small {
            max-width: 17.5%; 
        }

        .overlay-button:active {
            filter: brightness(0.7); 
        }

        .mic-icon {
            max-width: 20%; 
            height: auto;
            margin-bottom: 10px;
        }

        /* --- アニメーション用スタイル --- */

        /* pic-03〜pic-07 が表示されるコンテナ */
        #animation-container {
            position: absolute;
            /* 画面の上下中央に配置 */
            top: 50%; 
            left: 50%;
            /* 自身の中心を基準に */
            transform: translate(-50%, -50%);
            /* 背景画像と同じ幅に設定 */
            width: 70%; 
            /* 画像がずれて表示される領域を確保 */
            height: 300px; 
            /* 他のボタン操作を妨げないように */
            pointer-events: none; 
            z-index: 5; /* 2つの画像の「間」の層に配置 */
        }

        /* アニメーションで表示される画像 */
        .animated-pic {
            position: absolute;
            /* button-01 と同じくらいのサイズ感に */
            max-width: 35%; 
            height: auto;
            /* 最初は非表示 */
            opacity: 0; 
            /* フェードインのアニメーション */
            transition: opacity 0.3s ease; 
            /* top と left は JavaScript で設定されます */
        }

    </style>
</head>
<body>

    <div class="right-container">
        
        <!-- pic-01.png の上に button-01.png を重ねる -->
        <div class="image-stack-container">
            <img src="pic-01.png" alt="Pic 01" class="background-image">
            <div class="overlay-content">
                <!-- JavaScriptで参照するためにIDを追加 -->
                <img src="button-01.png" alt="スキャン開始ボタン" class="overlay-button" id="scanButton">
            </div>
        </div>
        
        <!-- pic-02.png の上に mic.png と button-02.png を重ねる -->
        <div class="image-stack-container">
            <img src="pic-02.png" alt="Pic 02" class="background-image">
            <div class="overlay-content">
                <img src="mic.png" alt="マイクアイコン" class="mic-icon">
                <img src="button-02.png" alt="OKボタン" class="overlay-button button-small">
            </div>
        </div>

        <!-- ★ pic-03〜pic-07 を表示するためのコンテナ ★ -->
        <div id="animation-container"></div>

    </div>

    <!-- 
      【デバッグ対応＆アニメーション制御】
    -->
    <script>
        // DOMが読み込まれてからスクリプトを実行
        document.addEventListener('DOMContentLoaded', function() {
            
            // iPad (Mobile Safari) で :active 疑似クラスを動作させる
            document.body.addEventListener('touchstart', function() {}, false);

            // --- アニメーションのロジック ---
            const scanButton = document.getElementById('scanButton');
            const animationContainer = document.getElementById('animation-container');
            
            // 表示する画像のリスト
            const imagesToShow = [
                'pic-03.png',
                'pic-04.png',
                'pic-05.png',
                'pic-06.png',
                'pic-07.png'
            ];
            
            let animationStarted = false;

            if (scanButton) {
                // スキャンボタンがクリック（タップ）されたら実行
                scanButton.addEventListener('click', function() {
                    // アニメーションが既に開始されている場合は何もしない（連打防止）
                    if (animationStarted) return; 
                    animationStarted = true;

                    // 念のため、前回のアニメーション画像をクリア
                    animationContainer.innerHTML = ''; 

                    // 0.5秒おきに画像を表示
                    imagesToShow.forEach((src, index) => {
                        setTimeout(() => {
                            const img = document.createElement('img');
                            img.src = src;
                            img.className = 'animated-pic';
                            
                            // 1枚ごとに右下にずらす (例: 25pxずつ)
                            const offset = index * 25;
                            img.style.top = offset + 'px';
                            img.style.left = offset + 'px';
                            
                            // コンテナに画像を追加
                            animationContainer.appendChild(img);
                            
                            // 少し遅延させてからフェードインさせる
                            // (appendChild直後にopacityを変更してもtransitionが効かないため)
                            setTimeout(() => {
                                img.style.opacity = 1;
                            }, 50); 

                        }, index * 500); // index * 0.5秒
                    });
                });
            }
        });
    </script>
</body>
</html>

